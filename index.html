<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>üç™ Modern ‡§ï‡§ø‡§∞‡§æ‡§®‡§æ ‡§ë‡§∞‡•ç‡§°‡§∞</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* Modern Color Scheme */
:root {
  --primary: #4caf50;
  --primary-dark: #388e3c;
  --primary-light: #c8e6c9;
  --accent: #ff9800;
  --accent-dark: #f57c00;
  --background: #f5f9f5;
  --card-bg: #ffffff;
  --text: #333333;
  --text-light: #666666;
  --text-glow: #ffffff;
  --discount: #e53935;
  --sidebar-bg: linear-gradient(135deg, #2c3e50, #1a1f2c);
}

/* Modern Styles */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  font-family: 'Segoe UI', 'Roboto', 'Noto Sans', sans-serif;
}

body {
  background: var(--background);
  color: var(--text);
  padding-bottom: 180px;
  line-height: 1.6;
  margin-left: 250px;
  transition: margin-left 0.3s;
}

/* Modern Sidebar Navigation */
.sidebar {
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  width: 250px;
  background: var(--sidebar-bg);
  box-shadow: 0 0 15px rgba(0,0,0,0.3);
  z-index: 1000;
  overflow-y: auto;
  padding: 20px 0;
}

.sidebar-header {
  padding: 20px;
  text-align: center;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  margin-bottom: 15px;
}

.sidebar-header h1 {
  color: white;
  font-size: 1.5rem;
  text-shadow: 0 0 10px rgba(255,255,255,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.sidebar-header h1 i {
  color: var(--accent);
}

.sidebar-nav {
  display: flex;
  flex-direction: column;
}

.sidebar-nav a {
  padding: 15px 25px;
  font-weight: 600;
  color: rgba(255,255,255,0.8);
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 15px;
  transition: all 0.3s ease;
  border-left: 4px solid transparent;
  margin: 5px 0;
  font-size: 1.1rem;
}

.sidebar-nav a:hover {
  background: rgba(255,255,255,0.1);
  color: white;
  border-left: 4px solid var(--accent);
}

.sidebar-nav a.active {
  background: rgba(255,255,255,0.15);
  color: white;
  border-left: 4px solid var(--accent);
}

.sidebar-footer {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 15px;
  text-align: center;
  color: rgba(255,255,255,0.6);
  font-size: 0.9rem;
  border-top: 1px solid rgba(255,255,255,0.1);
}

/* Responsive sidebar */
@media (max-width: 768px) {
  body {
    margin-left: 0;
  }
  
  .sidebar {
    width: 100%;
    height: 70px;
    padding: 0;
    overflow-x: auto;
    overflow-y: hidden;
  }
  
  .sidebar-header {
    display: none;
  }
  
  .sidebar-nav {
    flex-direction: row;
    padding: 0 10px;
  }
  
  .sidebar-nav a {
    padding: 10px 15px;
    border-left: none;
    border-bottom: 3px solid transparent;
    white-space: nowrap;
  }
  
  .sidebar-nav a:hover, 
  .sidebar-nav a.active {
    border-left: none;
    border-bottom: 3px solid var(--accent);
  }
  
  .sidebar-footer {
    display: none;
  }
}

section {
  padding: 100px 30px 30px;
}

h2 {
  margin-top: 20px;
  margin-bottom: 30px;
  font-size: 2rem;
  color: var(--primary-dark);
  text-shadow: 0 0 8px rgba(76, 175, 80, 0.2);
  position: relative;
  padding-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 12px;
}

h2::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 60px;
  height: 3px;
  background: var(--accent);
  border-radius: 3px;
}

h3 {
  font-size: 1.4rem;
  color: var(--primary-dark);
  margin-bottom: 20px;
  text-shadow: 0 0 5px rgba(76, 175, 80, 0.2);
}

/* Modern Grid Layout */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 20px;
}

/* Modern Card Design with Hover Effect */
.card {
  background: var(--card-bg);
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.08);
  text-align: center;
  padding-bottom: 15px;
  transition: all 0.3s ease;
  overflow: hidden;
  position: relative;
  border: 1px solid rgba(0,0,0,0.05);
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.12);
}

.card img {
  width: 100%;
  height: 130px;
  object-fit: cover;
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
}

.card h4 {
  margin: 12px 0 6px;
  font-size: 16px;
  font-weight: 600;
  color: var(--text);
  padding: 0 8px;
  text-shadow: 0 0 2px rgba(0,0,0,0.1);
}

.card .price-info {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 6px;
  margin: 8px 0;
}

.card .original-price {
  color: var(--text-light);
  text-decoration: line-through;
  font-size: 13px;
}

.card .discount-badge {
  background: var(--discount);
  color: white;
  font-size: 11px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 10px;
  position: absolute;
  top: 10px;
  right: 10px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.price-select, .qty-input, .discount-select {
  width: 80px;
  padding: 8px;
  margin: 6px 0;
  border: 1px solid #ddd;
  border-radius: 8px;
  text-align: center;
  background: #fafafa;
  font-size: 14px;
  transition: all 0.2s ease;
}

.price-select:focus, .qty-input:focus, .discount-select:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
  outline: none;
}

.discount-select {
  width: 70px;
  background: #fff8e1;
  border-color: #ffecb3;
}

.discount-label {
  display: block;
  font-size: 12px;
  color: var(--accent-dark);
  margin-top: 4px;
  font-weight: 500;
}

.btn {
  margin: 10px 8px 5px;
  padding: 8px 16px;
  border-radius: 30px;
  border: none;
  background: linear-gradient(to right, var(--primary), var(--primary-dark));
  color: white;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
  box-shadow: 0 4px 8px rgba(76, 175, 80, 0.3);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(76, 175, 80, 0.4);
}

.btn:active {
  transform: translateY(0);
}

.btn i {
  font-size: 14px;
}

/* Form Styles */
.form-box {
  padding: 25px;
  background: var(--card-bg);
  margin: 30px;
  border-radius: 15px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}

.form-box input {
  width: 100%;
  padding: 12px 15px;
  margin: 10px 0;
  border: 1px solid #ddd;
  border-radius: 10px;
  font-size: 16px;
  transition: all 0.2s ease;
}

.form-box input:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
  outline: none;
}

/* Cart Bar */
.cart-bar {
  position: fixed;
  bottom: 0;
  left: 250px;
  right: 0;
  background: var(--card-bg);
  box-shadow: 0 -4px 15px rgba(0,0,0,0.12);
  padding: 18px 20px;
  z-index: 1000;
  display: flex;
  flex-direction: column;
  transition: left 0.3s;
}

.cart-bar ul {
  list-style: none;
  padding: 0 20px;
  margin: 10px 0;
  max-height: 110px;
  overflow-y: auto;
}

.cart-bar li {
  padding: 8px 0;
  border-bottom: 1px dashed #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.cart-bar li:last-child {
  border-bottom: none;
}

.cart-bar .item-info {
  display: flex;
  align-items: center;
  gap: 8px;
}

.cart-bar .discount-info {
  font-size: 12px;
  color: var(--discount);
  font-weight: 500;
}

.remove-btn {
  margin-left: 8px;
  background: #f44336;
  color: white;
  border: none;
  padding: 5px 10px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.remove-btn:hover {
  background: #d32f2f;
}

.cart-summary {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  font-weight: bold;
  font-size: 18px;
}

.cart-total {
  color: var(--primary-dark);
  text-shadow: 0 0 5px rgba(76, 175, 80, 0.3);
}

.discount-total {
  color: var(--discount);
  font-size: 16px;
}

.submit-btn {
  background: linear-gradient(to right, var(--accent), var(--accent-dark));
  color: white;
  border: none;
  padding: 14px 25px;
  font-weight: 700;
  border-radius: 12px;
  cursor: pointer;
  font-size: 16px;
  transition: all 0.3s ease;
  margin-top: 10px;
  box-shadow: 0 4px 10px rgba(255, 152, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 15px rgba(255, 152, 0, 0.5);
}

.submit-btn:active {
  transform: translateY(0);
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .cart-bar {
    left: 0;
  }
  
  .grid {
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  }
  
  .card img {
    height: 100px;
  }
  
  section {
    padding-top: 90px;
  }
  
  .form-box {
    margin: 20px;
    padding: 20px;
  }
}

@media (max-width: 480px) {
  .grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }
  
  .form-box {
    margin: 15px;
  }
  
  .cart-bar {
    padding: 15px;
  }
  
  .submit-btn {
    padding: 12px 20px;
  }
}

/* Floating Action Button */
.fab {
  position: fixed;
  bottom: 100px;
  right: 20px;
  width: 60px;
  height: 60px;
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 6px 15px rgba(0,0,0,0.2);
  cursor: pointer;
  z-index: 999;
  font-size: 24px;
  transition: all 0.3s ease;
}

.fab:hover {
  transform: translateY(-5px) scale(1.05);
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

/* Animation for adding to cart */
@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

.pulse {
  animation: pulse 0.5s ease;
}

/* Discount ribbon */
.ribbon {
  position: absolute;
  top: 10px;
  left: -10px;
  padding: 5px 15px;
  background: var(--discount);
  color: white;
  font-size: 12px;
  font-weight: bold;
  transform: rotate(-45deg);
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  z-index: 1;
}

/* Category emojis */
.emoji {
  font-size: 1.4em;
  vertical-align: middle;
}
</style>
</head>
<body>

<!-- Sidebar Navigation -->
<div class="sidebar">
  <div class="sidebar-header">
    <h1><i class="fas fa-store"></i> ‡§ï‡§ø‡§∞‡§æ‡§®‡§æ ‡§∏‡•ç‡§ü‡•ã‡§∞</h1>
  </div>
  
  <div class="sidebar-nav" id="navBar">
    <!-- Navigation will be added by JS -->
  </div>
  
  <div class="sidebar-footer">
    <p>¬© 2023 ‡§ï‡§ø‡§∞‡§æ‡§®‡§æ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ</p>
  </div>
</div>

<div class="form-box">
  <h3><i class="fas fa-user"></i> ‡§ï‡§∏‡•ç‡§ü‡§Æ‡§∞ ‡§°‡§ø‡§ü‡•á‡§≤</h3>
  <input id="custName" placeholder="‡§®‡§æ‡§Æ">
  <input id="custMobile" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞" type="tel">
  <input id="custAddr" placeholder="‡§™‡•Ç‡§∞‡§æ ‡§™‡§§‡§æ">
</div>

<div id="itemsWrap"></div>

<div class="cart-bar">
  <div class="cart-summary">
    <div id="cartInfo">üõí <span class="text-glow">0 ‡§Ü‡§á‡§ü‡§Æ</span></div>
    <div id="cartTotal" class="cart-total">üí∞ ‡§ï‡•Å‡§≤: ‚Çπ0</div>
  </div>
  <ul id="cartList"></ul>
  <button class="submit-btn" onclick="submitOrder()">
    <i class="fas fa-paper-plane"></i> üì§ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç
  </button>
</div>

<div class="fab" onclick="scrollToTop()">
  <i class="fas fa-arrow-up"></i>
</div>

<script>
/* ===== CONFIG ===== */
const waNumber='916351598832';
const tgToken ='7729928604:AAEINikbhwHTMSK1pgV3nROUfSGEVb-z2r4';
const tgChatId='6798434092';
const minOrder=100;

/* Emoji map for categories */
const categoryEmojis = {
  '‡§¨‡§ø‡§∏‡•ç‡§ï‡§ø‡§ü': 'üç™',
  '‡§§‡•á‡§≤': 'üõ¢Ô∏è',
  '‡§∏‡§æ‡§¨‡•Å‡§® / ‡§∂‡•à‡§Ç‡§™‡•Ç': 'üß¥',
  '‡§ö‡§æ‡§µ‡§≤ ‡§î‡§∞ ‡§Ü‡§ü‡§æ': 'üçö',
  '‡§¶‡§æ‡§≤‡•á‡§Ç': 'ü•£',
  '‡§Æ‡§∏‡§æ‡§≤‡•á': 'üå∂Ô∏è',
  '‡§°‡•á‡§Ø‡§∞‡•Ä': 'ü•õ',
  '‡§ö‡§æ‡§Ø / ‡§ï‡•â‡§´‡•Ä': '‚òï',
  '‡§™‡•á‡§Ø': 'ü•§',
  '‡§∏‡•ç‡§®‡•à‡§ï‡•ç‡§∏': 'üçø',
  '‡§´‡§≤': 'üçé',
  '‡§∏‡§¨‡•ç‡§ú‡§ø‡§Ø‡§æ‡§Ç': 'ü•¶',
  '‡§¨‡•á‡§ï‡§∞‡•Ä': 'üçû'
};

/* ===== IMAGE MAP ===== */
const imgMap={
  'Parle-G':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Good Day':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Hide & Seek':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Refined Oil':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Lifebuoy':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Lux':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Clinic Plus':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Head & Shoulders':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Mustard Oil':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Groundnut Oil':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Soyabean Oil':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Marie':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Basmati Rice':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Wheat Flour':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Sona Masoori':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Moong Dal':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Masoor Dal':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Chana Dal':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Turmeric Powder':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Coriander Powder':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg',
  'Red Chilli Powder':'https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg'
};
const defaultImg='https://i.postimg.cc/3wycqY2R/17525009998764074664621859523129.jpg';

/* ===== DATA (‡§™‡•ç‡§∞‡§æ‡§á‡§∏ ‡§µ‡•à‡§∞‡§ø‡§è‡§Ç‡§ü ‡§î‡§∞ ‡§°‡§ø‡§∏‡•ç‡§ï‡§æ‡§â‡§Ç‡§ü ‡§ï‡•á ‡§∏‡§æ‡§•) ===== */
const data={
'‡§¨‡§ø‡§∏‡•ç‡§ï‡§ø‡§ü':[
  {name:'Parle-G',         prices:[5,10,20], discount: 10},
  {name:'Good Day',        prices:[10,20,50], discount: 15},
  {name:'Hide & Seek',     prices:[10,20,50], discount: 5},
  {name:'Marie',           prices:[5,10,20], discount: 20}
],
'‡§§‡•á‡§≤':[
  {name:'Refined Oil',     prices:[50,100], discount: 7},
  {name:'Mustard Oil',     prices:[50,120], discount: 12},
  {name:'Groundnut Oil',   prices:[60,120], discount: 8},
  {name:'Soyabean Oil',    prices:[50,110], discount: 5}
],
'‡§∏‡§æ‡§¨‡•Å‡§® / ‡§∂‡•à‡§Ç‡§™‡•Ç':[
  {name:'Lifebuoy',        prices:[10,20], discount: 10},
  {name:'Lux',             prices:[10,20], discount: 15},
  {name:'Clinic Plus',     prices:[1,2,5], discount: 20},
  {name:'Head & Shoulders',prices:[5,10,20], discount: 25}
],
'‡§ö‡§æ‡§µ‡§≤ ‡§î‡§∞ ‡§Ü‡§ü‡§æ':[
  {name:'Basmati Rice',    prices:[80,160], discount: 8},
  {name:'Wheat Flour',     prices:[40,80], discount: 10},
  {name:'Sona Masoori',    prices:[70,140], discount: 5}
],
'‡§¶‡§æ‡§≤‡•á‡§Ç':[
  {name:'Moong Dal',       prices:[90,180], discount: 7},
  {name:'Masoor Dal',      prices:[80,160], discount: 10},
  {name:'Chana Dal',       prices:[85,170], discount: 5}
],
'‡§Æ‡§∏‡§æ‡§≤‡•á':[
  {name:'Turmeric Powder', prices:[20,40,100], discount: 10},
  {name:'Coriander Powder',prices:[25,50,120], discount: 15},
  {name:'Red Chilli Powder',prices:[30,60,150], discount: 12}
]
};

/* ===== BUILD HTML ===== */
const nav=document.getElementById('navBar');
const wrap=document.getElementById('itemsWrap');
let id=1;

// Add categories to navbar
Object.keys(data).forEach((cat, idx) => {
  const emoji = categoryEmojis[cat] || 'üõí';
  nav.innerHTML += `
    <a href="#sec${idx+1}" class="${idx === 0 ? 'active' : ''}">
      <span class="emoji">${emoji}</span> ${cat}
    </a>`;
});

// Add sections for each category
Object.entries(data).forEach(([cat, items], idx) => {
  const emoji = categoryEmojis[cat] || 'üõí';
  let sec = `<section id="sec${idx+1}"><h2><span class="emoji">${emoji}</span> ${cat}</h2><div class="grid">`;
  
  items.forEach(it => {
    const img = imgMap[it.name] || defaultImg;
    const discount = it.discount || 0;
    
    sec += `<div class="card">
      ${discount > 0 ? `<div class="ribbon">${discount}% OFF</div>` : ''}
      <img src="${img}" alt="${it.name}">
      <h4>${it.name}</h4>`;
    
    if (discount > 0) {
      const originalPrice = it.prices[0];
      const discountedPrice = originalPrice * (1 - discount/100);
      sec += `<div class="price-info">
                <span class="original-price">‚Çπ${originalPrice}</span>
                <span class="discount-price">‚Çπ${discountedPrice.toFixed(2)}</span>
              </div>`;
    } else {
      sec += `<div class="price-info">‚Çπ${it.prices[0]}</div>`;
    }
    
    sec += `<select id="p${id}" class="price-select">
        ${it.prices.map(v => `<option value="${v}">‚Çπ${v}</option>`).join('')}
      </select>
      <input id="q${id}" type="number" class="qty-input" placeholder="‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ" min="1" value="1">
      
      ${discount > 0 ? `<div class="discount-label">${discount}% ‡§õ‡•Ç‡§ü ‡§≤‡§æ‡§ó‡•Ç</div>` : ''}
      
      <button class="btn" onclick="add('${it.name}',parseInt(p${id}.value),'unit',q${id}.value, ${discount})">
        <i class="fas fa-cart-plus"></i> ‡§ú‡•ã‡§°‡§º‡•á‡§Ç
      </button>
    </div>`;
    id++;
  });
  
  sec += '</div></section>';
  wrap.innerHTML += sec;
});

/* ===== CART LOGIC ===== */
let cart = [];
let totalDiscount = 0;

function add(name, price, unit, qty, discount=0) {
  qty = parseFloat(qty);
  if(!qty || qty <= 0) {
    alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç!');
    return;
  }
  
  // Calculate discount
  let discountedPrice = price;
  if(discount > 0) {
    discountedPrice = price * (1 - discount/100);
    totalDiscount += (price - discountedPrice) * qty;
  }
  
  const totalPrice = discountedPrice * qty;
  
  // Check if item already in cart
  const existingItem = cart.find(item => item.name === name && item.price === price);
  if(existingItem) {
    existingItem.qty += qty;
    existingItem.totalPrice += totalPrice;
    existingItem.discountApplied += (price - discountedPrice) * qty;
  } else {
    cart.push({
      name: name,
      price: price,
      qty: qty,
      discount: discount,
      discountedPrice: discountedPrice,
      totalPrice: totalPrice,
      discountApplied: (price - discountedPrice) * qty
    });
  }
  
  update();
  
  // Add pulse animation to cart
  document.getElementById('cartInfo').classList.add('pulse');
  setTimeout(() => {
    document.getElementById('cartInfo').classList.remove('pulse');
  }, 500);
}

function update() {
  const totalItems = cart.reduce((sum, item) => sum + item.qty, 0);
  const subtotal = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
  const total = cart.reduce((sum, item) => sum + item.totalPrice, 0);
  const discountTotal = cart.reduce((sum, item) => sum + item.discountApplied, 0);
  
  document.getElementById('cartInfo').innerHTML = `üõí <span class="text-glow">${totalItems} ‡§Ü‡§á‡§ü‡§Æ</span>`;
  document.getElementById('cartTotal').innerHTML = `üí∞ ‡§ï‡•Å‡§≤: ‚Çπ${total.toFixed(2)}`;
  
  const ul = document.getElementById('cartList'); 
  ul.innerHTML = '';
  
  if(cart.length === 0) {
    ul.innerHTML = '<li style="text-align:center; padding:15px 0;">‡§Ü‡§™‡§ï‡§æ ‡§ï‡§æ‡§∞‡•ç‡§ü ‡§ñ‡§æ‡§≤‡•Ä ‡§π‡•à</li>';
    return;
  }
  
  cart.forEach((item, index) => {
    const li = document.createElement('li');
    
    li.innerHTML = `
      <div class="item-info">
        <span>${item.name} (${item.qty})</span>
        ${item.discount > 0 ? `<span class="discount-info">${item.discount}% ‡§õ‡•Ç‡§ü</span>` : ''}
      </div>
      <div>
        <span>‚Çπ${item.totalPrice.toFixed(2)}</span>
        <button class="remove-btn" onclick="removeItem(${index})"><i class="fas fa-trash"></i></button>
      </div>
    `;
    
    ul.appendChild(li);
  });
  
  // Add discount info
  if(discountTotal > 0) {
    const discountLi = document.createElement('li');
    discountLi.innerHTML = `
      <div>‡§ï‡•Å‡§≤ ‡§õ‡•Ç‡§ü:</div>
      <div class="discount-total discount-glow">-‚Çπ${discountTotal.toFixed(2)}</div>
    `;
    ul.appendChild(discountLi);
  }
  
  const totalLi = document.createElement('li');
  totalLi.innerHTML = `
    <div>‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§∞‡§æ‡§∂‡§ø:</div>
    <div class="cart-total">‚Çπ${total.toFixed(2)}</div>
  `;
  ul.appendChild(totalLi);
}

function removeItem(index) {
  cart.splice(index, 1);
  update();
}

function submitOrder() {
  if(!cart.length) {
    alert('üõí ‡§ï‡•É‡§™‡§Ø‡§æ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§¶‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ ‡§è‡§ï ‡§Ü‡§á‡§ü‡§Æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç!');
    return;
  }
  
  const total = cart.reduce((sum, item) => sum + item.totalPrice, 0);
  if(total < minOrder) {
    alert(`‚ùå ‡§®‡•ç‡§Ø‡•Ç‡§®‡§§‡§Æ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§∞‡§æ‡§∂‡§ø ‚Çπ${minOrder} ‡§π‡•à‡•§ ‡§Ü‡§™‡§ï‡§æ ‡§ï‡•Å‡§≤: ‚Çπ${total.toFixed(2)}`);
    return;
  }
  
  const nm = document.getElementById('custName').value || 'N/A';
  const mb = document.getElementById('custMobile').value || 'N/A';
  const ad = document.getElementById('custAddr').value || 'N/A';
  
  if(nm === 'N/A' || mb === 'N/A' || ad === 'N/A') {
    alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ, ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§î‡§∞ ‡§™‡•Ç‡§∞‡§æ ‡§™‡§§‡§æ ‡§≠‡§∞‡•á‡§Ç!');
    return;
  }
  
  navigator.geolocation.getCurrentPosition(
    pos => sendOrder(nm, mb, ad, pos.coords.latitude, pos.coords.longitude, total),
    () => sendOrder(nm, mb, ad, null, null, total)
  );
}

function sendOrder(nm, mb, ad, lat, lon, total) {
  let msg = 'üõçÔ∏è *‡§®‡§Ø‡§æ ‡§ï‡§ø‡§∞‡§æ‡§®‡§æ ‡§ë‡§∞‡•ç‡§°‡§∞!*\n\n';
  msg += '*‡§Ü‡§á‡§ü‡§Æ:*\n';
  
  cart.forEach(item => {
    msg += `‚Ä¢ ${item.name} (${item.qty}) - ‚Çπ${item.totalPrice.toFixed(2)}`;
    if(item.discount > 0) {
      msg += ` (${item.discount}% ‡§õ‡•Ç‡§ü)`;
    }
    msg += '\n';
  });
  
  const discountTotal = cart.reduce((sum, item) => sum + item.discountApplied, 0);
  if(discountTotal > 0) {
    msg += `\n*‡§ï‡•Å‡§≤ ‡§õ‡•Ç‡§ü:* -‚Çπ${discountTotal.toFixed(2)}\n`;
  }
  
  msg += `\nüí∞ *‡§ï‡•Å‡§≤ ‡§∞‡§æ‡§∂‡§ø: ‚Çπ${total.toFixed(2)}*\n`;
  msg += `üë§ *‡§ó‡•ç‡§∞‡§æ‡§π‡§ï:* ${nm}\nüìû ${mb}\nüè† ${ad}`;
  
  if(lat && lon) {
    msg += `\nüìç https://www.google.com/maps?q=${lat},${lon}`;
  }
  
  // Send via WhatsApp
  window.open(`https://wa.me/${waNumber}?text=${encodeURIComponent(msg)}`, '_blank');
  
  // Send via Telegram
  fetch(`https://api.telegram.org/bot${tgToken}/sendMessage`, {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({
      chat_id: tgChatId,
      text: msg,
      parse_mode: 'Markdown'
    })
  })
  .then(r => r.json())
  .then(d => {
    if(d.ok) {
      alert('‚úÖ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§π‡•ã ‡§ó‡§Ø‡§æ!');
      cart = [];
      update();
    } else {
      alert('‚ùå ‡§ü‡•á‡§≤‡•Ä‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§™‡§∞ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§≠‡•á‡§ú‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§∏‡•á ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§');
    }
  })
  .catch(e => {
    console.error(e);
    alert('‚ùå ‡§ü‡•á‡§≤‡•Ä‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§™‡§∞ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§≠‡•á‡§ú‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§∏‡•á ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§');
  });
}

function scrollToTop() {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}

// Initialize page
update();

// Add smooth scrolling for navigation links
document.querySelectorAll('.sidebar-nav a').forEach(anchor => {
  anchor.addEventListener('click', function(e) {
    e.preventDefault();
    
    // Remove active class from all links
    document.querySelectorAll('.sidebar-nav a').forEach(link => {
      link.classList.remove('active');
    });
    
    // Add active class to clicked link
    this.classList.add('active');
    
    const target = document.querySelector(this.getAttribute('href'));
    if(target) {
      window.scrollTo({
        top: target.offsetTop - 80,
        behavior: 'smooth'
      });
    }
  });
});
</script>
</body>
</html>
